@startuml
title Adgangsplatformen - log out of multiple clients.

"Patron"->"Browser": Log out.
    "Browser"->"Client": Log out.
    "Client"->"login.bib.dk": Request - Log out.
    "login.bib.dk"->"login.bib.dk": Generate list of clients the patron is logged into.
    
    group REPEAT WHILE user is logged into one or more clients.
        "login.bib.dk"->"Client": Request - Remove logged in cookie.
        "Client"->"Browser": Request - Remove logged in cookie.
        "Browser"->"Browser": Remove logged in cookie.
        "Browser"->"Client": Return - Cookie removed (T/f).
        "Client"->"login.bib.dk": Status logged out (T/f).
        "Client"->"Browser": Display - Logged out.
        "Browser"->"Patron": Display - Logged out.
        group IF user initiates log out from userpages like profile og loan status (../user).
            "Client"->"Browser": Redirect patron to frontpage.
            "Browser"->"Patron": Display frontpage.
            else ELSE log out is initiated from any other pages.
            "Client"->"Browser": Do not redirect user but update current page.
            "Browser"->"Patron": Reload current page.
        end
    end
@enduml